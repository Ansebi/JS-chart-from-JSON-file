<html>

<body>
<div id="the_div">Hidden name</div>
<div id="address_div"></div>
<button onclick="readAndShowValues_(JSON_ADDRESS_, 'users', 'user_id')">Read and Display</button>
</body>

<script>
let JSON_ADDRESS_ = "http://localhost:8000/data.json";
document.getElementById("address_div").innerHTML = "File to parse: " + JSON_ADDRESS_;

function revealMessage_(message_) {
  var message_;
  document.getElementById("the_div").innerHTML = message_;
}

async function readJSON_(address_) {
  const resp_ = await fetch(address_, {cache: "reload"});
  const json_parsed = await resp_.json();
  return json_parsed;
}

function JSON_extract_value(
  parsed_json_object,
  upper_level,
  n,
  field_) {
  // json = {upper_level: [{...}, {...}, {...} ...]}
  const value_ = parsed_json_object[upper_level][n][field_]
  return value_;
}

async function readAndShowValues_(
address_,
upper_level,
field_) {
  const json_object_ = await readJSON_(address_);
  const json_len_ = Object.keys(json_object_).length;
  var id_list_ = [];
  for (let n = 0; n <= json_len_; n++) {
    var value_ = await JSON_extract_value(
    json_object_,
    upper_level,
    n,
    field_);
    id_list_.push(value_);
  };
  var message_ = 'The ids are: ';
  message_ += id_list_;
  message_ += '. Total number: ';
  message_ += id_list_.length;
  message_ += ' ids.';
  revealMessage_(message_);
}
</script>

</html>
