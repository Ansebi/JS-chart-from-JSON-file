<html>

<body>
<div id="the_div">Hidden name</div>
<div id="address_div"></div>
<button onclick="readAndShowValue_(JSON_ADDRESS_, 'users', 0, 'id')">Read and Display</button>
</body>

<script>
let JSON_ADDRESS_ = "http://localhost:8000/data.json";
document.getElementById("address_div").innerHTML = "File to parse: " + JSON_ADDRESS_;

function revealMessage_(message_) {
  var message_;
  document.getElementById("the_div").innerHTML = message_;
}

// async function readJSON_(address_) {
//   const resp_ = await fetch(address_, {cache: "reload"});
//   console.log('resp_', resp_);
//   const json_parsed = await resp_.json();
//   console.log('json_parsed', json_parsed);
//   const name_ = await json_parsed.users[0].name;
//   console.log('name_', name_);
//   return name_;
// }

async function readJSON_(address_) {
  const resp_ = await fetch(address_, {cache: "reload"});
  console.log('resp_', resp_);
  const json_parsed = await resp_.json();
  console.log('json_parsed', json_parsed);
  return json_parsed;
}

async function JSON_extract_value(
  parsed_json_object,
  upper_level,
  n,
  field_) {
  // json = {upper_level: [{...}, {...}, {...} ...]}
  const value_ = await parsed_json_object[upper_level][n][field_]
  console.log('value:', value_)
  return value_;
}

async function readAndShowValue_(
address_,
upper_level,
n,
field_) {
  const json_object_ = await readJSON_(address_);
  const value_ = await JSON_extract_value(
  json_object_,
  upper_level,
  n,
  field_);
  revealMessage_(value_);
}

</script>
</html>
